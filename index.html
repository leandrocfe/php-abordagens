<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <link crossorigin="anonymous" media="all"
            integrity="sha512-dxFVfmRlzgntw9xnKsYVxQUyV8JZifjI76hlssNAlbCn/gOmgfo4skfRATXTzQ8qG+NNgIh6fvkeQttpFQRpQQ=="
            rel="stylesheet"
            href="https://github.githubassets.com/assets/frameworks-7711557e6465ce09edc3dc672ac615c5.css" />
        <link crossorigin="anonymous" media="all"
            integrity="sha512-Xmr5ClGKswOccXdyL0RCm5oWrxTpJKvZtsPy+7nl5MR/F81Hr5msZN5tygUK1lzL60fJZlXxsuD9/T6rsaphPg=="
            rel="stylesheet" href="https://github.githubassets.com/assets/github-5e6af90a518ab3039c7177722f44429b.css" />
    </head>

    <body class="logged-in env-production min-width-lg">

        <div class="Box-body">
            <article class="markdown-body entry-content p-5" itemprop="text">
                <h1><a id="user-content-php-abordagens" class="anchor" aria-hidden="true" href="#php-abordagens"><svg
                            class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                            aria-hidden="true">
                            <path fill-rule="evenodd"
                                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                            </path>
                        </svg></a>php-abordagens</h1>
                <p>Alguns conceitos e práticas da linguagem PHP para utilizar no dia a dia, com base nas abordagens do livro
                    PHP
                    Moderno - Josh Lockhart</p>
                <h2><a id="user-content-instalação" class="anchor" aria-hidden="true" href="#instalação"><svg
                            class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                            aria-hidden="true">
                            <path fill-rule="evenodd"
                                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                            </path>
                        </svg></a>Instalação</h2>
                <p>Após clonar o projeto, execute o composer para instalar as dependências:</p>
                <div class="highlight highlight-source-shell">
                    <pre>composer install</pre>
                </div>
                <p>Para rodar o projeto usando o servidor interno do PHP, acesse a pasta do projeto no terminal e digite:
                </p>
                <div class="highlight highlight-source-shell">
                    <pre>php -S localhost:4000</pre>
                </div>
                <p>Acesse no browser <a href="http://localhost:4000" rel="nofollow">http://localhost:4000</a></p>
                <h2><a id="user-content-closures" class="anchor" aria-hidden="true" href="#closures"><svg
                            class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                            aria-hidden="true">
                            <path fill-rule="evenodd"
                                d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                            </path>
                        </svg></a>Closures</h2>
                <p>Funções anônimas que podem ser usadas a partir da versão 5.3.0 do PHP. Estas funções podem ser atribuídas
                    a
                    variáveis e passadas por ai, como qualquer outro objeto PHP.</p>
                <ul>
                    <li>
                        <p><a
                                href="/app/exemplos/closures/atributo.php">atributo.php</a>
                        </p>
                        <p>Neste exemplo, um objeto closure é criado e atribuído para $status. A closure tem o mesmo
                            comportamento de
                            uma função, com argumentos e retorno de valor. Porém, sem nome:</p>
                    </li>
                </ul>
                <div class="highlight highlight-text-html-php">
                    <pre>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span>componente para valores aleatórios</span></span>
<span class="pl-s1"><span class="pl-smi">$faker</span> <span class="pl-k">=</span> <span class="pl-c1">Faker\</span><span class="pl-c1">Factory</span><span class="pl-k">::</span>create();</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span>tipos dos status e limites</span></span>
<span class="pl-s1"><span class="pl-smi">$badges</span> <span class="pl-k">=</span> [</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>bronze<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">range</span>(<span class="pl-c1">0</span>,<span class="pl-c1">3</span>),</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>silver<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">range</span>(<span class="pl-c1">4</span>,<span class="pl-c1">7</span>),</span>
<span class="pl-s1">    <span class="pl-s"><span class="pl-pds">'</span>gold<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">range</span>(<span class="pl-c1">8</span>,<span class="pl-c1">10</span>)</span>
<span class="pl-s1">];</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span>closure que recupera o status a partir do atributo stars</span></span>
<span class="pl-s1"><span class="pl-smi">$status</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">$badges</span>, <span class="pl-smi">$stars</span>){</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c"><span class="pl-c">//</span>inicializando o status</span></span>
<span class="pl-s1">    <span class="pl-smi">$badge_description</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>N/A<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">foreach</span> (<span class="pl-smi">$badges</span> <span class="pl-k">as</span> <span class="pl-smi">$key</span> <span class="pl-k">=&gt;</span> <span class="pl-smi">$value</span>) {</span>
<span class="pl-s1">        </span>
<span class="pl-s1">        <span class="pl-c"><span class="pl-c">//</span>verificando o atributo stars de acordo com o array badges</span></span>
<span class="pl-s1">        <span class="pl-k">if</span>(<span class="pl-c1">in_array</span>(<span class="pl-smi">$stars</span>, <span class="pl-smi">$value</span>)){</span>
<span class="pl-s1"></span>
<span class="pl-s1">            <span class="pl-c"><span class="pl-c">//</span>setando o badge key</span></span>
<span class="pl-s1">            <span class="pl-smi">$badge_description</span> <span class="pl-k">=</span> <span class="pl-smi">$key</span>;</span>
<span class="pl-s1">        }</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">return</span> <span class="pl-smi">$badge_description</span>;</span>
<span class="pl-s1">};</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$user</span> <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">for</span>(<span class="pl-smi">$i</span><span class="pl-k">=</span><span class="pl-c1">0</span>; <span class="pl-smi">$i</span><span class="pl-k">&lt;</span><span class="pl-smi">$faker</span><span class="pl-k">-&gt;</span><span class="pl-smi">randomDigit</span>; <span class="pl-smi">$i</span><span class="pl-k">++</span>){</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c"><span class="pl-c">//</span>criando um objeto fake User</span></span>
<span class="pl-s1">    <span class="pl-smi">$user</span>[<span class="pl-smi">$i</span>] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">stdClass</span>();</span>
<span class="pl-s1">    <span class="pl-smi">$user</span>[<span class="pl-smi">$i</span>]<span class="pl-k">-&gt;</span><span class="pl-smi">uuid</span> <span class="pl-k">=</span> <span class="pl-smi">$faker</span><span class="pl-k">-&gt;</span><span class="pl-smi">uuid</span>;</span>
<span class="pl-s1">    <span class="pl-smi">$user</span>[<span class="pl-smi">$i</span>]<span class="pl-k">-&gt;</span><span class="pl-smi">name</span> <span class="pl-k">=</span> <span class="pl-smi">$faker</span><span class="pl-k">-&gt;</span><span class="pl-smi">name</span>;</span>
<span class="pl-s1">    <span class="pl-smi">$user</span>[<span class="pl-smi">$i</span>]<span class="pl-k">-&gt;</span><span class="pl-smi">email</span> <span class="pl-k">=</span> <span class="pl-smi">$faker</span><span class="pl-k">-&gt;</span><span class="pl-smi">email</span>;</span>
<span class="pl-s1">    <span class="pl-smi">$user</span>[<span class="pl-smi">$i</span>]<span class="pl-k">-&gt;</span><span class="pl-smi">stars</span> <span class="pl-k">=</span> <span class="pl-smi">$faker</span><span class="pl-k">-&gt;</span><span class="pl-smi">randomDigit</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c"><span class="pl-c">//</span>atribuindo o status com a closure</span></span>
<span class="pl-s1">    <span class="pl-smi">$user</span>[<span class="pl-smi">$i</span>]<span class="pl-k">-&gt;</span><span class="pl-smi">status</span> <span class="pl-k">=</span> $<span class="pl-smi">status</span>(<span class="pl-smi">$badges</span>, <span class="pl-smi">$user</span>[<span class="pl-smi">$i</span>]<span class="pl-k">-&gt;</span><span class="pl-smi">stars</span>);</span>
<span class="pl-s1">}</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-c1">json_encode</span>(<span class="pl-smi">$user</span>);</span></pre>
                </div>
                <ul>
                    <li>
                        <p><a
                                href="/app/exemplos/closures/callback.php">callback.php</a>
                        </p>
                        <p>As closures também podem ser passadas para outras funções PHP como argumentos, como qualquer
                            outro valor.
                            Neste exemplo a closure é utilizada como argumento do tipo callback, para modificar o objeto
                            inicial e
                            adicionar elementos:</p>
                    </li>
            
                </ul>
                <div class="highlight highlight-text-html-php">
                    <pre>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span>tipos dos status</span></span>
<span class="pl-s1"><span class="pl-smi">$badges</span> <span class="pl-k">=</span>[</span>
<span class="pl-s1">    [<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>label<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>bronze<span class="pl-pds">'</span></span>],</span>
<span class="pl-s1">    [<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">'</span>label<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>silver<span class="pl-pds">'</span></span>],</span>
<span class="pl-s1">    [<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">3</span>, <span class="pl-s"><span class="pl-pds">'</span>label<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>gold<span class="pl-pds">'</span></span>]</span>
<span class="pl-s1">];</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span>limites</span></span>
<span class="pl-s1"><span class="pl-smi">$ranges</span> <span class="pl-k">=</span> [</span>
<span class="pl-s1">    <span class="pl-c1">1</span> <span class="pl-k">=&gt;</span> [<span class="pl-s"><span class="pl-pds">'</span>min<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">'</span>max<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">3</span>],</span>
<span class="pl-s1">    <span class="pl-c1">2</span> <span class="pl-k">=&gt;</span> [<span class="pl-s"><span class="pl-pds">'</span>min<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">4</span>, <span class="pl-s"><span class="pl-pds">'</span>max<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">7</span>],</span>
<span class="pl-s1">    <span class="pl-c1">3</span> <span class="pl-k">=&gt;</span> [<span class="pl-s"><span class="pl-pds">'</span>min<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">8</span>, <span class="pl-s"><span class="pl-pds">'</span>max<span class="pl-pds">'</span></span> <span class="pl-k">=&gt;</span> <span class="pl-c1">10</span>]</span>
<span class="pl-s1">];</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c"><span class="pl-c">//</span>combinando o atributo range no array badges</span></span>
<span class="pl-s1"><span class="pl-smi">$badgeRanges</span> <span class="pl-k">=</span> <span class="pl-c1">array_map</span>(<span class="pl-k">function</span>(<span class="pl-smi">$badge</span>) <span class="pl-k">use</span> (<span class="pl-smi">$ranges</span>) {</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-c"><span class="pl-c">//</span>adicionando os valores do range para cada elemento do array</span></span>
<span class="pl-s1">    <span class="pl-smi">$badge</span>[<span class="pl-s"><span class="pl-pds">'</span>range<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-smi">$ranges</span>[<span class="pl-smi">$badge</span>[<span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>]];</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">return</span> <span class="pl-smi">$badge</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1">}, <span class="pl-smi">$badges</span>);</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-c1">json_encode</span>(<span class="pl-smi">$badgeRanges</span>);    </span></pre>
                </div>
            </article>
        </div>
    </body>
</html>